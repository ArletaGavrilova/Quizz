import telebot
from telebot.types import ReplyKeyboardMarkup, KeyboardButton
import config
import random
bot = telebot.TeleBot(config.token)

quiz = [
    {"question": "1 - –í—ã —á–µ–ª–æ–≤–µ–∫?",
     "options": ["–¥–∞", "–Ω–µ—Ç", "–ù–µ—Ç, —è —Ç–æ—Å—Ç–µ—Ä"], "correct": "–ù–µ—Ç, —è —Ç–æ—Å—Ç–µ—Ä"},

    {"question": "2 - –û—Ç–∫—É–¥–∞ –ø–æ—è–≤–∏—Å–ª—è –º–µ–º -–û–π –º–∞–º–∞ –ø—Ä–∏—à–ª–∞-?",
    "options": ["–ò–∑ —Å–µ—Ä–∏–∞–ª–∞ –ø–æ –º–∞–π–Ω–∫—Ä–∞—Ñ—Ç—É", "–ò–∑ –ê–ì–®", "–î–∞"], "correct": "–ò–∑ –ê–ì–®"},

    {"question": "3 - –ß–µ–º –º—ã –¥—ã—à–∏–º?",
     "options": ["–¶–∏–∞–Ω–∏—Å—Ç—ã–º –∫–∞–ª–∏–µ–º ‚ò∫Ô∏è", "–ü—Ä–æ–ø–∞–Ω–æ–º", "–í–æ–¥–æ–π ‚ò∫Ô∏è", "–í–æ–¥–æ—Ä–æ–¥–æ–º", "–ß–µ–º-—Ç–æ", "–í–æ–∑–¥—É—Ö–æ–º"], "correct": "–í–æ–∑–¥—É—Ö–æ–º"},

    {"question": "4 - –ß—Ç–æ —Ç–∞–∫–æ–µ BREATHEGE?",
     "options": ["–ò–≥—Ä–∞", "–§–∏–ª—å–º", "–°–µ—Ä–∏—è –∏–≥—Ä"], "correct": "–°–µ—Ä–∏—è –∏–≥—Ä"},

    {"question": "–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–¥–∏—é 2! (–°–ª–æ–∂–Ω–æ—Å—Ç—å) 5 - –ö—Ç–æ —Å–æ–∑–¥–∞–ª MINECRAFT",
     "options": ["–Ø", "–ù–æ—Ç—á", "–ú–∞—Ä–∫—É—Å –ü–µ—Ä—Å–æ–Ω", "–ú–∞–π–∫—Ä–æ—Å–æ—Ñ—Ç"], "correct": "–ú–∞—Ä–∫—É—Å –ü–µ—Ä—Å–æ–Ω"},

    {"question": "6 - –ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–∞–ø–∫–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –Ω–∞ –º–æ–µ–º –Ω–æ—É—Ç–µ?!",
     "options": ["Papochka", "pensil", "pk", "projekt", "sekretnije_fajli_pentagona"], "correct": "sekretnije_fajli_pentagona"},

    {"question": "7 - 2+2*2?",
     "options": ["8", "6", "2"], "correct": "6"},
     
    {"question": "8 - –û—Ç–∫—É–¥–∞ –ø–æ—è–≤–∏—Å–ª—è –º–µ–º -–ú–ê–ô–ù–ö–†–ê–§–¢ –ú–û–Ø –ñ–ò–ó–ù–¨-?",
    "options": ["–ò–∑ —Å–µ—Ä–∏–∞–ª–∞ –ø–æ –º–∞–π–Ω–∫—Ä–∞—Ñ—Ç—É", "–ò–∑ –ê–ì–®", "–î–∞"], "correct": "–ò–∑ –ê–ì–®"},

    {"question": "9 - –ß—Ç–æ –º—ã –µ–¥–∏–º?",
     "options": ["–ö—Ä—ã—Å–∏–Ω–Ω—ã–π —è–¥", "–Ø –≤–µ–≥–∞–Ω, —Ç—Ä–∞–≤—É", "–í–µ–≥–∞–Ω–æ–≤", "–ò–º–ø–æ—Å—Ç–µ—Ä–æ–≤", "–ß—Ç–æ-—Ç–æ", "–í–æ–∑–¥—É—Ö"], "correct": "–í–µ–≥–∞–Ω–æ–≤"},

    {"question": "–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–¥–∏—é 3! (–°–ª–æ–∂–Ω–æ—Å—Ç—å) 10 - –ß—Ç–æ —Ç–∞–∫–æ–µ –ê–ª—Ü–≥–µ–π–º–µ—Ä?",
     "options": ["–ß—Ç–æ —Ç–∞–∫–æ–µ –ê–ª—å—Ü–≥–µ–π–º–µ—Ä?", "–©–¢–ê", "–ö–∞–∫–æ–π—Ç–æ –≥–µ–π–º–µ—Ä"], "correct": "–ß—Ç–æ —Ç–∞–∫–æ–µ –ê–ª—å—Ü–≥–µ–π–º–µ—Ä?"},

    {"question": "11 - –õ–µ—Ç–µ–ª–∏ 2 –≤–µ—Ä–±–ª—é–¥–∞, 1 —Ä—ã–∂–∏–π, –¥—Ä—É–≥–æ–π –Ω–∞ –ª–µ–≤–æ, —Å–∫–æ–ª—å–∫–æ –≤–µ—Å–∏—Ç—å —á–∞–π–Ω–∞—è –ª–æ–∂–∫–∞ –¢—Ä–æ–ª–ª—è-–ê, –µ—Å–ª–∏ –î–∏–º–æ–Ω—á–∏–∫ –ø–æ—à–æ–ª –≤ –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å –≤ 699435883434858 –ª–µ—Ç?",
     "options": ["3 –û–≥—É—Ä—Ü–∞", "–ë–∞–Ω–∞–Ω", "–ß–ï–ì–û", "–ú–∞–π–∫—Ä–æ—Å–æ—Ñ—Ç"], "correct": "3 –û–≥—É—Ä—Ü–∞"},

    {"question": "12 - –ï—Å–ª–∏ —è–Ω–≤–∞—Ä—å —Ä–∞–≤–µ–Ω 717, –º–∞—Ä—Ç —Ä–∞–≤–µ–Ω 5315, –∞ –∏—é–Ω—å —Ä–∞–≤–µ–Ω 4624, —Ç–æ —á–µ–º—É —Ä–∞–≤–µ–Ω –∞–≤–≥—É—Å—Ç? –û—Ç–≤–µ—Ç—å—Ç–µ –∑–¥–µ—Å—å. –õ–∏ –µ—Ö–∞–ª, –∫–æ–≥–¥–∞ –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –µ–≥–æ –º–∏–ª–æ–º–µ—Ç—Ä –ø–æ–∫–∞–∑–∞–ª 16961 –∏ –±—ã–ª –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏ –≤–ø–µ—Ä–µ–¥, –∏ –Ω–∞–∑–∞–¥. –ö–∞–∫–∏–º –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –º–∏–ª—è, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –≤–ø–µ—Ä–µ–¥, –∏ –Ω–∞–∑–∞–¥?",
     "options": ["–•–∑", "–∑—Ö", "69", "–ì–æ–º—É–Ω–∫—É–ª", "1945", "–°—Ç–∞–ª–∏–Ω", "–ò—é–ª—å", "–ß–µ–≥–æ", "–ñ–∏—Ç—å –∏–ª–∏ –Ω–µ –∂–∏—Ç—å? –í–æ—Ç –≤ —á–µ–º –≤–æ–ø—Ä–æ—Å"], "correct": "–°—Ç–∞–ª–∏–Ω"},

    {"question": "13 - –û–Ω–∏ –Ω–µ –±—É–¥—É—Ç –Ω–∞–≥–æ–Ω—è—Ç—å —Ç–æ—Å–∫—É, –Ω–∞–≤–æ–¥–∏—Ç—å –Ω–∞ –º—ã—Å–ª—å –æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞—Ö, –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≥—É—Å—Ç—ã—Ö —Ç—É–º–∞–Ω–∞—Ö –∏ –º—É–∑—ã–∫–µ –í–∞–≥–Ω–µ—Ä–∞. –û–Ω–∏ –±—É–¥—É—Ç –∑–∞–æ—Å—Ç—Ä–µ–Ω–Ω—ã–º–∏ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö, –∏–º–ø–µ—Ä–∏–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏, —Å–≤–µ—Ä—Ö—Ä–µ–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏, –æ–±—Ä–∞—â–µ–Ω–Ω—ã–º–∏ –∫ –Ω–µ–±—É, –ø–æ–¥–æ–±–Ω–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º—É –º–∏—Å—Ç–∏—Ü–∏–∑–º—É, –ø–æ–¥–æ–±–Ω–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º –∏—Å–ø–∞–Ω—Å–∫–∏–º —Å–∏–Ω–¥–∏–∫–∞—Ç–∞–º, —Å–ª–æ–≤–Ω–æ –±–∞—à–Ω–∏ –ë—É—Ä–≥–æ—Å—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞, –≤—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–µ–Ω—ã –≤ –Ω–µ–±–æ¬ª. –û —á–µ–º –≥–æ–≤–æ—Ä–∏–ª –°–∞–ª—å–≤–∞–¥–æ—Ä –î–∞–ª–∏?",
        "options": ["–û —Ä–∞–∫–µ—Ç–∞—Ö", "–û —Å–≤–æ–∏—Ö —É—Å–∞—Ö", "–û –±–µ–≥—Å—Ç–≤–∏–∏", "–Ø —á—ë –∑–Ω–∞—é"], "correct": "–û —Å–≤–æ–∏—Ö —É—Å–∞—Ö"},

    {"question": "14 - –ì–æ–º–µ—Ä, –∂–µ–ª–∞—è –≤–æ–∑–Ω–µ—Å—Ç–∏ —Ö–≤–∞–ª—É –æ–¥–Ω–æ–º—É –∏–∑ —Å–∞–º—ã—Ö –≤–µ–ª–∏–∫–∏—Ö —Å–≤–æ–∏—Ö –≥–µ—Ä–æ–µ–≤, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –µ–≥–æ —Å–æ –ª—å–≤–æ–º, –ø–∞–Ω—Ç–µ—Ä–æ–π –∏–ª–∏, —Å–∫–∞–∂–µ–º, –∫–∞–±–∞–Ω–æ–º, –ø—Ä–æ–≤–æ–¥–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏ –º–µ–∂–¥—É –Ω–µ—É—Å—Ç—Ä–∞—à–∏–º–æ—Å—Ç—å—é –∏ –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ–º —Å–≤–æ–µ–≥–æ –≤–µ–ª–∏–∫–æ–≥–æ –≥–µ—Ä–æ—è –∏ –µ—é. –û–Ω–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç —Å–≤–æ–µ–π –¥–æ–±—ã—á–∏, –Ω–æ –Ω–µ–ø—Ä–µ–º–µ–Ω–Ω–æ –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ –Ω–µ–π –Ω–µ –æ–¥–∏–Ω —Ä–∞–∑, –ø–æ–∫–∞ –Ω–µ –Ω–∞—Å–ª–∞–¥–∏—Ç—Å—è –µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é. –û –∫–æ–º –∏–ª–∏ –æ —á–µ–º —ç—Ç–æ –ì–æ–º–µ—Ä?",
        "options": ["–û –∫–æ—à–∫–µ", "–û –µ–¥–µ", "–û –º—É—Ö–µ"], "correct": "–û –º—É—Ö–µ"},

    {"question": "–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–¥–∏—é 4! (–°–ª–æ–∂–Ω–æ—Å—Ç—å)15 - –í –í–µ–Ω—Å–∫–æ–º –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ-–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º –º—É–∑–µ–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å —Ç–∞–±–ª–∏—Ü–∞, –¥–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è XVII –≤–µ–∫–æ–º ‚Äî ¬´–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä–æ–¥–æ–≤, –ø—Ä–µ–±—ã–≤–∞—é—â–∏—Ö –≤ –ï–≤—Ä–æ–ø–µ, –∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞¬ª. –í –≥—Ä–∞—Ñ–µ ¬´–æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è–ø—Ä–µ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ¬ª –Ω–∞–ø—Ä–æ—Ç–∏–≤ –ø–æ–ª—è–∫–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–æ ¬´—Ä–∞—Å–ø—Ä–∏¬ª, –Ω–∞–ø—Ä–æ—Ç–∏–≤ –≤–µ–Ω–≥—Ä–æ–≤ ‚Äî ¬´—Ö–æ–¥–∏—Ç—å –≤ –≥–æ—Å—Ç–∏¬ª, –Ω–∞–ø—Ä–æ—Ç–∏–≤ –∞–Ω–≥–ª–∏—á–∞–Ω ‚Äî ¬´—Ä–∞–±–æ—Ç–∞¬ª, –Ω–∞–ø—Ä–æ—Ç–∏–≤ —Ñ—Ä–∞–Ω—Ü—É–∑–æ–≤ ‚Äî ¬´–æ–±–º–∞–Ω¬ª. –ê —á—Ç–æ —è–≤–ª—è–ª–æ—Å—å –æ—Å–Ω–æ–≤–Ω—ã–º –≤—Ä–µ–º—è–ø—Ä–µ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ–º —Ä—É—Å—Å–∫–∏—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–∞–±–ª–∏—Ü–µ?",
        "options": ["–ú—ã—Ç—å—Å—è –≤ –±–∞–Ω–µ", "–°–æ–Ω", "–ö–∞—Ä—Ç–∞"], "correct": "–°–æ–Ω"},

    {"question": "16 - –ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –û–≤–æ—â–∞–º–∏?",
        "options": ["–Ø", "–°–µ–º–µ–Ω", "–ê—Ä–ª–µ—Ç–∞", "–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –û–≤–æ—â–∞–º–∏?"], "correct": ["–Ø", "–°–µ–º–µ–Ω"]},

     {"question": "17 - –ò–∑ –∫–∞–∫–∏—Ö —Ç—Ä—ë—Ö –ø—Ä–µ–¥–ª–æ–≥–æ–≤ –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–º–∞—à–Ω–µ–≥–æ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ?",
        "options": ["–ö–æ–∑–∞", "–ù–∏–∫–∏—Ç–∞", "–Ø", "–ö–æ—Ç"], "correct": ["–ö–æ–∑–∞"]},

    {"question": "18 - –ö—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –†–∞–∑—Ä–∞–±–æ–º?",
        "options": ["–ö–æ–¥–ª–∞–Ω–¥", "–°–µ–º–µ–Ω", "–ê—Ä—Ç–µ–º", "–ê—Ä–ª–µ—Ç–∞"], "correct": ["–°–µ–º–µ–Ω", "–ê—Ä–ª–µ—Ç–∞"]},

    {"question": "19 - –ö–∞–∫–æ–π –∑–Ω–∞–∫ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ–∂–¥—É 6 –∏ 7, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–∫–∞–∑–∞–ª—Å—è –º–µ–Ω—å—à–µ 7 –∏ –±–æ–ª—å—à–µ 6?",
        "options": ["6.5", "6.7", "6", "—Ö–∑"], "correct": ["6.7"]},

    {"question": "20 - –ù–∞ –∫–∞–∫–æ–º —è–∑–∏–∫–µ —ç—Ç–æ—Ç –±–æ—Ç?",
        "options": ["Python", "–ù–∞ —Ä—É—Å—Å–∫–æ–º", "Excel", "HTML"], "correct": ["Python", "–ù–∞ —Ä—É—Å—Å–∫–æ–º"]},
]

@bot.message_handler(commands=['score'])
def score(message):
    chat_id = message.chat.id
    if chat_id in user_state:
        bot.send_message(chat_id, f"–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç: {user_state[chat_id]['score']} –±–∞–ª–ª–æ–≤.")
    else:
        bot.send_message(chat_id, "–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã. –ù–∞–∂–º–∏ /start, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.")

@bot.message_handler(commands=['info'])
def info(message):
    bot.send_message(message.chat.id, "–≠—Ç–æ—Ç –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–≤–æ—é –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–µ—Ä–∏—é –∞–±—Å—É—Ä–¥–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å ‚Äî –Ω–∞–∂–º–∏ /start.")

@bot.message_handler(commands=['menu'])
def menu(message):
    markup = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    markup.add(KeyboardButton("/start"), KeyboardButton("/info"), KeyboardButton("/score"))
    bot.send_message(message.chat.id, "üìã –ú–µ–Ω—é –∫–æ–º–∞–Ω–¥:", reply_markup=markup)

@bot.message_handler(commands=['end'])
def end_session(message):
    chat_id = message.chat.id
    if chat_id in user_state:
        del user_state[chat_id]
        bot.send_message(chat_id, "–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω.")
    else:
        bot.send_message(chat_id, "–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞. –í–≤–µ–¥–∏ /start.")
user_state = {}
@bot.message_handler(commands=['start'])
def start(message):
    chat_id = message.chat.id
    user_state[chat_id] = {"score": 0, "question_index": 0}
    bot.send_message(chat_id, "–ü—Ä–∏–≤–µ—Ç! –î–∞–≤–∞–π –ø—Ä–æ–≤–µ—Ä–∏–º —Ç–≤–æ—é –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ —É —Ç–µ–±—è –±–∞–ª–ª–æ–≤ –±–æ–ª—å—à–µ 5, –ø–æ–∑–¥—Ä–æ–≤–ª—è—é, –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å—Å—è —É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞. –í–æ—Ç –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å:")
    send_question(chat_id)

def send_question(chat_id):
    index = user_state[chat_id]["question_index"]
    
    if index < len(quiz):
        q = quiz[index]
        markup = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        for option in q["options"]:
            markup.add(KeyboardButton(option))
        bot.send_message(chat_id, q["question"], reply_markup=markup)
    else:
        score = user_state[chat_id]["score"]
        bot.send_message(chat_id, f"–¢–µ—Å—Ç –æ–∫–æ–Ω—á–µ–Ω! –¢—ã –Ω–∞–±—Ä–∞–ª {score} –±–∞–ª–ª–æ–≤, –µ—Å–ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ 5, –ø–æ–∑–¥—Ä–æ–≤–ª—è—é, –≤–∞–º –Ω–∞–¥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—Å—è —É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞")
        del user_state[chat_id]


@bot.message_handler(func=lambda message: message.chat.id in user_state)
def check_answer(message):
    chat_id = message.chat.id
    text = message.text.strip()
    
    if text.startswith("Question =="):
        try:
            q_num = int(text.split("==")[1].strip()) - 1
            if 0 <= q_num < len(quiz):
                user_state[chat_id]["question_index"] = q_num
                bot.send_message(chat_id, f" –ü–µ—Ä–µ—Ö–æ–∂—É –∫ –≤–æ–ø—Ä–æ—Å—É ‚Ññ{q_num + 1}")
                send_question(chat_id)
                return
            else:
                bot.send_message(chat_id, " –¢–∞–∫–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –Ω–µ—Ç.")
                return
        except:
            bot.send_message(chat_id, " –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü—Ä–∏–º–µ—Ä: Question == 3")
            return

    if text.startswith("Score =="):
        try:
            add_score = int(text.split("==")[1].strip())
            user_state[chat_id]["score"] += add_score
            bot.send_message(chat_id, f" –î–æ–±–∞–≤–ª–µ–Ω–æ {add_score} –±–∞–ª–ª–æ–≤. –ù–æ–≤—ã–π —Å—á—ë—Ç: {user_state[chat_id]['score']}")
            return
        except:
            bot.send_message(chat_id, " –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü—Ä–∏–º–µ—Ä: Score == 5")
            return

    index = user_state[chat_id]["question_index"]
    if index >= len(quiz):
        bot.send_message(chat_id, "–û—à–∏–±–∫–∞: –í–æ–ø—Ä–æ—Å–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç.")
        return  

    question_data = quiz[index]
    correct_answers = question_data["correct"]

    if text in correct_answers:
        bot.send_message(chat_id, "–ü–æ–Ω ")
        user_state[chat_id]["score"] += 1
    else:
        bot.send_message(chat_id, f"–ù–µ –ø–æ–Ω . –ü–æ–Ω = {', '.join(correct_answers)}")

    user_state[chat_id]["question_index"] += 1
    if user_state[chat_id]["question_index"] < len(quiz):
        send_question(chat_id)
    else:
        score = user_state[chat_id]["score"]
        bot.send_message(chat_id, f"–¢–µ—Å—Ç –æ–∫–æ–Ω—á–µ–Ω! –¢—ã –Ω–∞–±—Ä–∞–ª {score} –±–∞–ª–ª–æ–≤. –ï—Å–ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ 5 ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç–µ–±–µ —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å—Å—è —É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.")
        del user_state[chat_id]

bot.polling(none_stop=True) 